---
published: true
date: 2019-02-07 T00:00:00.000Z
title: 2019-02-07 work session
---

Yesterday I implemented both the proximity warning and the light sensor coral color and mood change interactions. Today I'll continue adding [some of the other planned interactions]({{site.baseurl}}{% post_url 2019-02-02-log %}).

### Health system

The health system can be changed both by accelerometer events and battery charge. The battery charge will basically change the rate in which the health replenishes or drains and accelerometer events always drain health immediately.

I created a threshold detection to activate events based on the acceleration magnitude. Each time this event is triggered, the health is diminished a fixed amount and the phone vibrates to indicate that. I also added an option to the vibration player to play a sound and modulate its volume as per the vibration amplitude curve. It worked ok for indicating this "damage" event.

Now that the health value changes both through regeneration and per player action, it is time to make that value have implications for the game world. Some of the effects I'm planning are:

- Kill a few corals anytime a damage event is triggered;
- Change the health change rate of corals based on sea health: they last shorter periods;
- If health reaches 0, kill all corals and stop the game, start a timer and quits the game;

I'll start the work with the coral age / deplete dynamic.

